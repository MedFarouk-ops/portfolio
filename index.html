<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mohamed Farouk Khabir CV</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .header, .section-title {
            text-align: center;
            margin: 20px 0;
            color: #007bff; /* Blue accent color */
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .contact-info {
            text-align: center;
            margin: 20px 0;
        }
        .contact-info p {
            margin: 5px 0;
        }
        .icon {
            font-size: 24px;
            margin-right: 8px;
        }
        #language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body>
    <div id="language-selector" class="p-3">
        <select id="languageDropdown" class="form-select">
            <option value="en">English</option>
            <option value="fr" selected>Français</option>
            <option value="de">Deutsch</option>
            <option value="ar">العربية</option>
        </select>
    </div>

    <div class="container mt-5" id="cv-container">
        <!-- Content will be dynamically loaded here -->
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Function to fetch and load JSON data
            function loadJSON(callback, language = 'fr') {
                var xobj = new XMLHttpRequest();
                xobj.overrideMimeType("application/json");
                xobj.open('GET', `${language}.json`, true); // Dynamic language file
                xobj.onreadystatechange = function () {
                    if (xobj.readyState == 4) {
                        if (xobj.status == 200) {
                            console.log("JSON data fetched successfully for language:", language);
                            callback(JSON.parse(xobj.responseText));
                        } else {
                            console.error("Failed to fetch JSON data for language:", language);
                        }
                    }
                };
                xobj.send(null);
            }


            // Function to populate content based on JSON data
            function populateContent(data) {
                var cvContainer = document.getElementById('cv-container');
                cvContainer.innerHTML = `
                    <div class="container" data-aos="fade-up">
                        <header class="header">
                            <h1 style="color: #343a40;">${data.header.name}</h1>
                            <h2 style="color: #6c757d;">${data.header.title}</h2>
                        </header>
                
                        <div class="contact-info">
                            <p><i class="fas fa-map-marker-alt icon"></i> ${data.contact.location}</p>
                            <p><i class="fas fa-phone-alt icon"></i> <a href="tel:${data.contact.phone}">${data.contact.phone}</a></p>
                            <p><i class="fas fa-envelope icon"></i> <a href="mailto:${data.contact.email}">${data.contact.email}</a></p>
                            <p><i class="fab fa-github icon"></i> <a href="https://${data.contact.github}" target="_blank">${data.contact.github}</a></p>
                            <p><i class="fab fa-linkedin icon"></i> <a href="https://${data.contact.linkedin}" target="_blank">${data.contact.linkedin}</a></p>
                        </div>
                
                        <section data-aos="fade-right">
                            <h3 class="section-title">${data.sections.professional_profile.title}</h3>
                            <p>${data.sections.professional_profile.content}</p>
                        </section>
                
                        <section data-aos="fade-left">
                            <h3 class="section-title">${data.sections.professional_experience.title}</h3>
                            <ul>
                                ${data.sections.professional_experience.experiences.map(exp => `
                                    <li>
                                        <h4>${exp.title}</h4>
                                        <p>${exp.company}, ${exp.location} | ${exp.date}</p>
                                        <p>${exp.description}</p>
                                    </li>
                                `).join('')}
                            </ul>
                        </section>
                    </div>
                `;
            }

            // Load JSON data and populate content
            loadJSON(function(response) {
                console.log("Populating content with JSON data", response);
                populateContent(response);
            });

            // Change language event listener
            document.getElementById('languageDropdown').addEventListener('change', function() {
                var selectedLanguage = this.value;
                console.log(`Language changed to: ${selectedLanguage}`);
                loadJSON(function(response) {
                    populateContent(response);
                }, selectedLanguage);
            });

            // Initialize AOS library
            AOS.init({
                duration: 1200,
            });
        });
    </script>
</body>
</html>
